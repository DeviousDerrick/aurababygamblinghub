<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aurababy Casino Empire</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --purple-deep: #1a0d2e;
        --purple-mid: #2d1b4e;
        --purple-bright: #7b2cbf;
        --blue-bright: #00b4d8;
        --pink-neon: #f72585;
        --gold-bright: #ffd700;
        --white: #ffffff;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html, body {
        height: 100%;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        color: var(--white);
        overflow-x: hidden;
      }

      body {
        background: linear-gradient(125deg, #1a0d2e 0%, #2d1b4e 25%, #3e1f5c 50%, #2d1b4e 75%, #1a0d2e 100%);
        background-size: 400% 400%;
        animation: gradientFlow 20s ease infinite;
        position: relative;
        padding: 20px;
      }

      @keyframes gradientFlow {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      .orb {
        position: fixed;
        border-radius: 50%;
        filter: blur(80px);
        opacity: 0.3;
        pointer-events: none;
        z-index: 0;
      }

      .orb1 {
        width: 500px;
        height: 500px;
        background: var(--purple-bright);
        top: -250px;
        left: -250px;
        animation: float 25s ease-in-out infinite;
      }

      .orb2 {
        width: 400px;
        height: 400px;
        background: var(--blue-bright);
        bottom: -200px;
        right: -200px;
        animation: float 30s ease-in-out infinite reverse;
      }

      .orb3 {
        width: 350px;
        height: 350px;
        background: var(--pink-neon);
        top: 50%;
        left: 50%;
        animation: float 35s ease-in-out infinite;
      }

      @keyframes float {
        0%, 100% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(100px, -100px) scale(1.1); }
        66% { transform: translate(-100px, 100px) scale(0.9); }
      }

      .container {
        position: relative;
        z-index: 1;
        max-width: 1600px;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .main-title {
        font-size: 2.5em;
        background: linear-gradient(135deg, var(--gold-bright), var(--pink-neon), var(--blue-bright));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: titleGlow 3s ease-in-out infinite;
        letter-spacing: 3px;
        margin-bottom: 15px;
      }

      @keyframes titleGlow {
        0%, 100% { filter: drop-shadow(0 0 20px rgba(255,215,0,0.8)); }
        50% { filter: drop-shadow(0 0 40px rgba(247,37,133,0.8)); }
      }

      .stats-row {
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
      }

      .stat-display {
        font-size: 1.5em;
        padding: 10px 20px;
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.2);
        border-radius: 12px;
      }

      .money-header {
        color: var(--gold-bright);
        text-shadow: 0 0 20px rgba(255,215,0,0.8);
      }

      .profit-display {
        color: var(--white);
      }

      .profit-display.positive {
        color: #00ff00;
        text-shadow: 0 0 20px rgba(0,255,0,0.8);
      }

      .profit-display.negative {
        color: #ff4444;
        text-shadow: 0 0 20px rgba(255,68,68,0.8);
      }

      .main-content {
        display: grid;
        grid-template-columns: 1fr 400px;
        gap: 30px;
        margin-bottom: 30px;
      }

      .machines-container {
        background: rgba(255,255,255,0.05);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255,255,255,0.1);
        border-radius: 28px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      }

      .machines-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .machines-title {
        font-size: 1.5em;
        background: linear-gradient(135deg, var(--white), var(--blue-bright));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .spin-all-btn {
        padding: 10px 20px;
        font-size: 1em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
        color: var(--white);
        border: 2px solid rgba(255,255,255,0.3);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .spin-all-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(247,37,133,0.6);
      }

      .machines-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
      }

      .slot-machine {
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.15);
        border-radius: 20px;
        padding: 20px;
        position: relative;
        transition: all 0.3s ease;
      }

      .slot-machine:hover {
        border-color: rgba(255,255,255,0.3);
        box-shadow: 0 0 20px rgba(123,44,191,0.4);
      }

      .slot-machine.empty {
        opacity: 0.3;
        border-style: dashed;
      }

      .machine-title {
        font-size: 0.9em;
        text-align: center;
        margin-bottom: 10px;
        color: var(--gold-bright);
      }

      .machine-stats {
        text-align: center;
        font-size: 0.75em;
        opacity: 0.8;
        margin-bottom: 10px;
      }

      .screen {
        background: rgba(0,0,0,0.4);
        border: 2px solid rgba(255,255,255,0.2);
        border-radius: 12px;
        padding: 15px 10px;
        margin-bottom: 15px;
      }

      .reels {
        display: flex;
        justify-content: center;
        gap: 10px;
      }

      .reel {
        width: 60px;
        height: 60px;
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.2);
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2em;
      }

      .reel.animate {
        animation: reelSpin 0.3s ease;
        border-color: var(--pink-neon);
      }

      @keyframes reelSpin {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
      }

      .machine-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }

      .machine-controls input {
        flex: 1;
        padding: 8px;
        font-size: 0.9em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: rgba(255,255,255,0.1);
        border: 2px solid rgba(255,255,255,0.2);
        border-radius: 8px;
        color: var(--white);
        text-align: center;
      }

      .machine-controls button {
        flex: 1;
        padding: 8px;
        font-size: 0.9em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
        color: var(--white);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .machine-controls button:hover {
        transform: scale(1.05);
      }

      .remove-btn {
        width: 100%;
        padding: 6px;
        font-size: 0.8em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: rgba(255,0,0,0.3);
        color: var(--white);
        border: 2px solid rgba(255,0,0,0.5);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .remove-btn:hover {
        background: rgba(255,0,0,0.5);
      }

      .machine-message {
        text-align: center;
        font-size: 0.85em;
        min-height: 20px;
      }

      .msg-win {
        color: var(--gold-bright);
        text-shadow: 0 0 10px rgba(255,215,0,0.8);
      }

      .msg-lose {
        color: var(--pink-neon);
      }

      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .panel {
        background: rgba(255,255,255,0.05);
        backdrop-filter: blur(20px);
        border: 2px solid rgba(255,255,255,0.1);
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      }

      .panel-title {
        font-size: 1.3em;
        text-align: center;
        margin-bottom: 15px;
        background: linear-gradient(135deg, var(--blue-bright), var(--pink-neon));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .buy-auto-btn {
        width: 100%;
        padding: 12px;
        font-size: 1em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: linear-gradient(135deg, var(--gold-bright), #ff8c00);
        color: var(--purple-deep);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
      }

      .buy-auto-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255,215,0,0.6);
      }

      .buy-auto-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .passives-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-height: 300px;
        overflow-y: auto;
      }

      .passives-list::-webkit-scrollbar {
        width: 8px;
      }

      .passives-list::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
      }

      .passives-list::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
        border-radius: 10px;
      }

      .passive-item {
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        padding: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s ease;
      }

      .passive-item:hover {
        background: rgba(255,255,255,0.1);
        border-color: rgba(255,255,255,0.3);
      }

      .passive-item.active {
        border-color: #00ff00;
        box-shadow: 0 0 15px rgba(0,255,0,0.3);
      }

      .passive-emoji {
        font-size: 2em;
      }

      .passive-info {
        flex: 1;
        font-size: 0.85em;
      }

      .passive-name {
        color: var(--gold-bright);
        margin-bottom: 3px;
      }

      .passive-effect {
        opacity: 0.8;
        font-size: 0.9em;
        margin-bottom: 3px;
      }

      .passive-level {
        color: var(--blue-bright);
        font-size: 0.85em;
      }

      .toggle-passive-btn {
        padding: 6px 12px;
        font-size: 0.8em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: linear-gradient(135deg, var(--pink-neon), #ff0055);
        color: var(--white);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .toggle-passive-btn:hover {
        transform: scale(1.05);
      }

      .toggle-passive-btn.active {
        background: linear-gradient(135deg, #00ff00, #00cc00);
      }

      .inventory-list {
        max-height: 300px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .inventory-list::-webkit-scrollbar {
        width: 8px;
      }

      .inventory-list::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
      }

      .inventory-list::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
        border-radius: 10px;
      }

      .inventory-item {
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        padding: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s ease;
      }

      .inventory-item:hover {
        background: rgba(255,255,255,0.1);
        border-color: rgba(255,255,255,0.3);
      }

      .inventory-emoji {
        font-size: 2em;
      }

      .inventory-info {
        flex: 1;
        font-size: 0.85em;
      }

      .inventory-name {
        color: var(--gold-bright);
        margin-bottom: 3px;
      }

      .inventory-count {
        opacity: 0.8;
        font-size: 0.9em;
      }

      .use-inventory-btn {
        padding: 6px 12px;
        font-size: 0.8em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: linear-gradient(135deg, var(--blue-bright), var(--purple-bright));
        color: var(--white);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .use-inventory-btn:hover {
        transform: scale(1.05);
      }

      .use-inventory-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .shop-panel {
        max-height: 600px;
        overflow-y: auto;
      }

      .shop-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .shop-section-title {
        font-size: 1.2em;
        text-align: center;
        padding: 15px;
        margin: 10px 0;
        background: linear-gradient(135deg, var(--purple-bright), var(--pink-neon));
        border-radius: 12px;
        color: var(--white);
        text-shadow: 0 0 10px rgba(255,255,255,0.5);
      }

      .shop-item {
        background: rgba(255,255,255,0.05);
        border: 2px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        padding: 15px;
        display: flex;
        align-items: center;
        gap: 12px;
        transition: all 0.3s ease;
      }

      .shop-item:hover {
        background: rgba(255,255,255,0.1);
        border-color: rgba(255,255,255,0.3);
      }

      .shop-item.maxed {
        opacity: 0.6;
        border-color: var(--gold-bright);
      }

      .shop-emoji {
        font-size: 2.5em;
      }

      .shop-info {
        flex: 1;
        font-size: 0.85em;
      }

      .shop-name {
        color: var(--gold-bright);
        margin-bottom: 5px;
      }

      .shop-stats {
        opacity: 0.8;
        font-size: 0.9em;
        margin-bottom: 5px;
      }

      .shop-price {
        color: var(--blue-bright);
      }

      .buy-shop-btn {
        padding: 8px 16px;
        font-size: 0.9em;
        font-family: "Poppins", sans-serif;
        font-weight: 800;
        background: linear-gradient(135deg, var(--blue-bright), var(--purple-bright));
        color: var(--white);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .buy-shop-btn:hover {
        transform: scale(1.05);
      }

      .buy-shop-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      @media (max-width: 1200px) {
        .main-content {
          grid-template-columns: 1fr;
        }

        .machines-grid {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
      }

      @media (max-width: 768px) {
        .machines-grid {
          grid-template-columns: 1fr;
        }

        .main-title {
          font-size: 1.8em;
        }
      }
    </style>
  </head>
  <body>
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="orb orb3"></div>

    <div class="container">
      <div class="header">
        <div class="main-title">üé∞ AURABABY CASINO EMPIRE üé∞</div>
        <div class="stats-row">
          <div class="stat-display money-header">
            üí∞ $<span id="money">1000</span>
          </div>
          <div class="stat-display profit-display" id="profitDisplay">
            üìä $0
          </div>
        </div>
      </div>

      <div class="main-content">
        <div class="machines-container">
          <div class="machines-header">
            <div class="machines-title">üé≤ ACTIVE MACHINES üé≤</div>
            <button class="spin-all-btn" id="spinAllBtn">SPIN ALL</button>
          </div>
          <div class="machines-grid" id="machinesGrid"></div>
        </div>

        <div class="sidebar">
          <div class="panel">
            <div class="panel-title">‚ö° PASSIVES ‚ö°</div>
            <div class="passives-list" id="passivesList"></div>
          </div>

          <div class="panel">
            <div class="panel-title">üìä GAME STATS üìä</div>
            <div id="statsPanel" style="font-size: 0.9em;">
              <div style="margin-bottom: 8px;">Spins: <span id="spinsPlayed" style="color: var(--gold-bright);">0</span></div>
              <div style="margin-bottom: 8px;">Wins: <span id="winsCount" style="color: #00ff00;">0</span></div>
              <div style="margin-bottom: 8px;">Losses: <span id="lossesCount" style="color: #ff4444;">0</span></div>
              <div style="margin-bottom: 8px;">Highest Win: $<span id="highestWin" style="color: var(--gold-bright);">0</span></div>
              <div style="margin-bottom: 8px;">Win Streak: <span id="winStreak" style="color: var(--pink-neon);">0</span> üî•</div>
            </div>
            <button class="buy-auto-btn" id="resetBtn" style="margin-top: 15px;">RESET GAME</button>
          </div>

          <div class="panel">
            <div class="panel-title">üéí INVENTORY üéí</div>
            <div class="inventory-list" id="inventoryList"></div>
          </div>

          <div class="panel shop-panel">
            <div class="panel-title">üè™ SHOP üõí</div>
            <div class="shop-grid" id="shopGrid"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Machine Types
      const MACHINE_TYPES = {
        highRoller: {
          name: "HIGH ROLLER",
          emoji: "üëî",
          winChance: 0.75,
          minPayout: 1.2,
          maxPayout: 1.5,
          cost: 500,
          description: "75% win rate, safe returns"
        },
        riskTaker: {
          name: "RISK TAKER",
          emoji: "üé≤",
          winChance: 0.25,
          minPayout: 5,
          maxPayout: 10,
          cost: 800,
          description: "25% win rate, HUGE payouts"
        },
        balanced: {
          name: "BALANCED",
          emoji: "‚öñÔ∏è",
          winChance: 0.50,
          minPayout: 2,
          maxPayout: 3,
          cost: 300,
          description: "50% win rate, fair game"
        },
        grinder: {
          name: "GRINDER",
          emoji: "‚öôÔ∏è",
          winChance: 0.85,
          minPayout: 1.1,
          maxPayout: 1.3,
          cost: 400,
          description: "85% win rate, steady income"
        },
        jackpot: {
          name: "JACKPOT HUNTER",
          emoji: "üí∞",
          winChance: 0.10,
          minPayout: 20,
          maxPayout: 50,
          cost: 1500,
          description: "10% win rate, MASSIVE jackpots"
        }
      };

      const SYMBOLS = ["üíé", "üçí", "üçã", "üçä", "‚≠ê", "7Ô∏è‚É£"];

      let money = 1000;
      let totalProfit = 0;
      let activeMachines = Array(8).fill(null);
      let inventory = {};
      let betValues = {};
      let passives = {
        luckyCharm: { owned: false, level: 0, maxLevel: 5 },
        moneyMagnet: { owned: false, level: 0, maxLevel: 5 },
        autoSpinner: { owned: false, active: false, interval: null },
        bulkDiscount: { owned: false, level: 0, maxLevel: 3 },
        profitMultiplier: { owned: false, level: 0, maxLevel: 3 },
        winStreak: { owned: false }
      };
      let winStreakCount = 0;
      let stats = {
        spinsPlayed: 0,
        wins: 0,
        losses: 0,
        highestWin: 0
      };

      function formatMoney(num) {
        if (num >= 1000000000) return (num / 1000000000).toFixed(1) + 'B';
        if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
        if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
        return Math.floor(num).toString();
      }

      function getEffectiveWinChance(baseChance) {
        let chance = baseChance;
        if (passives.luckyCharm.owned) {
          chance += (0.05 * passives.luckyCharm.level);
        }
        return Math.min(chance, 0.95);
      }

      function getEffectivePayout(basePayout) {
        let payout = basePayout;
        if (passives.moneyMagnet.owned) {
          payout *= (1 + 0.10 * passives.moneyMagnet.level);
        }
        if (passives.winStreak.owned && winStreakCount >= 3) {
          payout *= 2;
          winStreakCount = 0;
        }
        return payout;
      }

      function getMachineCost(baseCost) {
        let cost = baseCost;
        if (passives.bulkDiscount.owned) {
          cost *= (1 - 0.15 * passives.bulkDiscount.level);
        }
        return Math.floor(cost);
      }

      function updateUI() {
        document.getElementById('money').textContent = formatMoney(money);
        
        const profitDisplay = document.getElementById('profitDisplay');
        profitDisplay.textContent = `üìä $${formatMoney(Math.abs(totalProfit))}`;
        profitDisplay.className = 'profit-display ' + (totalProfit >= 0 ? 'positive' : 'negative');

        document.getElementById('spinsPlayed').textContent = stats.spinsPlayed;
        document.getElementById('winsCount').textContent = stats.wins;
        document.getElementById('lossesCount').textContent = stats.losses;
        document.getElementById('highestWin').textContent = formatMoney(stats.highestWin);
        document.getElementById('winStreak').textContent = winStreakCount;
        
        renderMachines();
        renderPassives();
        renderInventory();
        renderShop();
      }

      function renderMachines() {
        const grid = document.getElementById('machinesGrid');
        grid.innerHTML = '';

        activeMachines.forEach((machineKey, index) => {
          const div = document.createElement('div');
          div.className = machineKey ? 'slot-machine' : 'slot-machine empty';

          if (machineKey) {
            const machine = MACHINE_TYPES[machineKey];
            const effectiveWinChance = getEffectiveWinChance(machine.winChance);
            
            div.innerHTML = `
              <div class="machine-title">${machine.emoji} ${machine.name}</div>
              <div class="machine-stats">
                Win: ${Math.floor(effectiveWinChance * 100)}% | Pay: ${machine.minPayout}x-${machine.maxPayout}x
              </div>
              <div class="screen">
                <div class="reels">
                  <div class="reel" id="reel${index}-0">${SYMBOLS[0]}</div>
                  <div class="reel" id="reel${index}-1">${SYMBOLS[1]}</div>
                  <div class="reel" id="reel${index}-2">${SYMBOLS[2]}</div>
                </div>
              </div>
              <div class="machine-controls">
                <input
                  type="number"
                  id="bet${index}"
                  min="1"
                  value="${betValues[index] ?? 10}"
                  oninput="betValues[${index}] = this.value"
                />
                <button onclick="spinMachine(${index})">SPIN</button>
              </div>
              <button class="remove-btn" onclick="removeMachine(${index})">REMOVE</button>
              <div class="machine-message" id="msg${index}"></div>
            `;
          } else {
            div.innerHTML = '<div class="machine-title">EMPTY SLOT</div><div style="text-align:center; opacity:0.5; padding:40px 0;">Use inventory to add machine</div>';
          }

          grid.appendChild(div);
        });
      }

      function renderPassives() {
        const list = document.getElementById('passivesList');
        list.innerHTML = '';
        
        const passiveConfigs = {
          luckyCharm: { name: 'Lucky Charm', emoji: 'üçÄ', effect: '+5% win chance per level' },
          moneyMagnet: { name: 'Money Magnet', emoji: 'üß≤', effect: '+10% payout per level' },
          autoSpinner: { name: 'Auto Spinner', emoji: '‚ö°', effect: 'Auto-spin every 10s' },
          bulkDiscount: { name: 'Bulk Discount', emoji: 'üí≥', effect: '-15% machine cost per level' },
          profitMultiplier: { name: 'Profit Booster', emoji: 'üìà', effect: '+25% profit tracking per level' },
          winStreak: { name: 'Win Streak', emoji: 'üî•', effect: '3 wins = next win 2x' }
        };

        let hasPassives = false;
        Object.entries(passives).forEach(([key, passive]) => {
          if (passive.owned) {
            hasPassives = true;
            const config = passiveConfigs[key];
            const level = passive.level || 0;
            const maxLevel = passive.maxLevel || 1;
            
            const div = document.createElement('div');
            div.className = `passive-item ${passive.active ? 'active' : ''}`;
            div.innerHTML = `
              <div class="passive-emoji">${config.emoji}</div>
              <div class="passive-info">
                <div class="passive-name">${config.name}</div>
                <div class="passive-effect">${config.effect}</div>
                ${maxLevel > 1 ? `<div class="passive-level">Level ${level}/${maxLevel}</div>` : ''}
              </div>
              ${key === 'autoSpinner' ? `
                <button class="toggle-passive-btn ${passive.active ? 'active' : ''}" 
                        onclick="toggleAutoSpinner()">
                  ${passive.active ? 'ON' : 'OFF'}
                </button>
              ` : ''}
            `;
            list.appendChild(div);
          }
        });
        
        if (!hasPassives) {
          list.innerHTML = '<div style="text-align: center; opacity: 0.5; padding: 20px;">No passives yet! Buy some from the shop!</div>';
        }
      }

      function renderInventory() {
        const list = document.getElementById('inventoryList');
        list.innerHTML = '';

        let hasItems = false;
        Object.entries(inventory).forEach(([key, count]) => {
          if (count > 0) {
            hasItems = true;
            const machine = MACHINE_TYPES[key];
            const div = document.createElement('div');
            div.className = 'inventory-item';
            div.innerHTML = `
              <div class="inventory-emoji">${machine.emoji}</div>
              <div class="inventory-info">
                <div class="inventory-name">${machine.name}</div>
                <div class="inventory-count">x${count} | ${Math.floor(machine.winChance * 100)}% win</div>
              </div>
              <button class="use-inventory-btn" onclick="useFromInventory('${key}')" ${activeMachines.filter(m => m === null).length === 0 ? 'disabled' : ''}>USE</button>
            `;
            list.appendChild(div);
          }
        });

        if (!hasItems) {
          list.innerHTML = '<div style="text-align:center;opacity:0.5;padding:20px;">No machines in inventory</div>';
        }
      }

      function renderShop() {
        const grid = document.getElementById('shopGrid');
        grid.innerHTML = '';

        // Machines Section
        const machinesTitle = document.createElement('div');
        machinesTitle.className = 'shop-section-title';
        machinesTitle.textContent = 'üé∞ MACHINES üé∞';
        grid.appendChild(machinesTitle);

        Object.entries(MACHINE_TYPES).forEach(([key, machine]) => {
          const cost = getMachineCost(machine.cost);
          const div = document.createElement('div');
          div.className = 'shop-item';
          div.innerHTML = `
            <div class="shop-emoji">${machine.emoji}</div>
            <div class="shop-info">
              <div class="shop-name">${machine.name}</div>
              <div class="shop-stats">${machine.description}</div>
              <div class="shop-stats">Win: ${Math.floor(machine.winChance * 100)}% | Pay: ${machine.minPayout}x-${machine.maxPayout}x</div>
              <div class="shop-price">$${formatMoney(cost)}</div>
            </div>
            <button class="buy-shop-btn" onclick="buyMachine('${key}')" ${money < cost ? 'disabled' : ''}>BUY</button>
          `;
          grid.appendChild(div);
        });

        // Passives Section
        const passivesTitle = document.createElement('div');
        passivesTitle.className = 'shop-section-title';
        passivesTitle.textContent = '‚ö° PASSIVES ‚ö°';
        grid.appendChild(passivesTitle);

        const passiveShop = [
          { 
            key: 'luckyCharm', 
            name: 'Lucky Charm', 
            emoji: 'üçÄ', 
            baseCost: 1000, 
            costMultiplier: 2,
            effect: '+5% win chance',
            maxLevel: 5 
          },
          { 
            key: 'moneyMagnet', 
            name: 'Money Magnet', 
            emoji: 'üß≤', 
            baseCost: 1500, 
            costMultiplier: 2,
            effect: '+10% payout',
            maxLevel: 5 
          },
          { 
            key: 'autoSpinner', 
            name: 'Auto Spinner', 
            emoji: '‚ö°', 
            baseCost: 3000, 
            costMultiplier: 1,
            effect: 'Auto-spin all machines every 10s',
            maxLevel: 1 
          },
          { 
            key: 'bulkDiscount', 
            name: 'Bulk Discount', 
            emoji: 'üí≥', 
            baseCost: 2000, 
            costMultiplier: 2.5,
            effect: '-15% machine costs',
            maxLevel: 3 
          },
          { 
            key: 'profitMultiplier', 
            name: 'Profit Booster', 
            emoji: 'üìà', 
            baseCost: 2500, 
            costMultiplier: 3,
            effect: '+25% profit tracking',
            maxLevel: 3 
          },
          { 
            key: 'winStreak', 
            name: 'Win Streak', 
            emoji: 'üî•', 
            baseCost: 5000, 
            costMultiplier: 1,
            effect: '3 wins in a row = next win 2x',
            maxLevel: 1 
          }
        ];

        passiveShop.forEach(passive => {
          const current = passives[passive.key];
          const currentLevel = current.level || 0;
          const canUpgrade = currentLevel < passive.maxLevel;
          const cost = Math.floor(passive.baseCost * Math.pow(passive.costMultiplier, currentLevel));
          const canBuy = money >= cost && canUpgrade;
          
          const div = document.createElement('div');
          div.className = `shop-item ${!canUpgrade ? 'maxed' : ''}`;
          div.innerHTML = `
            <div class="shop-emoji">${passive.emoji}</div>
            <div class="shop-info">
              <div class="shop-name">${passive.name}</div>
              <div class="shop-stats">${passive.effect}</div>
              ${passive.maxLevel > 1 ? `<div class="shop-stats">Level: ${currentLevel}/${passive.maxLevel}</div>` : ''}
              ${canUpgrade ? `<div class="shop-price">$${formatMoney(cost)}</div>` : '<div class="shop-price">MAX LEVEL</div>'}
            </div>
            ${canUpgrade ? `
              <button class="buy-shop-btn" onclick="buyPassive('${passive.key}', ${cost})" ${!canBuy ? 'disabled' : ''}>
                ${current.owned ? 'UPGRADE' : 'BUY'}
              </button>
            ` : '<button class="buy-shop-btn" disabled>MAXED</button>'}
          `;
          grid.appendChild(div);
        });
      }

      function buyMachine(key) {
        const machine = MACHINE_TYPES[key];
        const cost = getMachineCost(machine.cost);
        
        if (money >= cost) {
          money -= cost;
          inventory[key] = (inventory[key] || 0) + 1;
          updateUI();
        }
      }

      function buyPassive(passiveKey, cost) {
        if (money >= cost) {
          money -= cost;
          passives[passiveKey].owned = true;
          passives[passiveKey].level = (passives[passiveKey].level || 0) + 1;
          updateUI();
        }
      }

      function useFromInventory(key) {
        const emptyIndex = activeMachines.findIndex(m => m === null);
        if (emptyIndex !== -1 && inventory[key] > 0) {
          activeMachines[emptyIndex] = key;
          inventory[key]--;
          updateUI();
        }
      }

      function removeMachine(index) {
        const machineKey = activeMachines[index];
        if (machineKey) {
          inventory[machineKey] = (inventory[machineKey] || 0) + 1;
          activeMachines[index] = null;
          updateUI();
        }
      }

      function spinMachine(index) {
        const machineKey = activeMachines[index];
        if (!machineKey) return;

        const machine = MACHINE_TYPES[machineKey];
        const betInput = document.getElementById(`bet${index}`);
        const bet = parseInt(betInput.value) || 0;

        if (bet <= 0 || bet > money) return;

        money -= bet;
        totalProfit -= bet;
        updateUI();

        const reels = [
          document.getElementById(`reel${index}-0`),
          document.getElementById(`reel${index}-1`),
          document.getElementById(`reel${index}-2`)
        ];

        reels.forEach(reel => reel.classList.add('animate'));

        let spins = 0;
        const interval = setInterval(() => {
          reels.forEach(reel => {
            reel.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
          });
          spins++;

          if (spins >= 10) {
            clearInterval(interval);
            finalizeSpin(index, machineKey, bet, reels, machine);
          }
        }, 100);
      }

      function finalizeSpin(index, machineKey, bet, reels, machine) {
        const symbols = reels.map(r => r.textContent);

        setTimeout(() => {
          reels.forEach(reel => reel.classList.remove('animate'));
          const msg = document.getElementById(`msg${index}`);
          stats.spinsPlayed++;

          const effectiveWinChance = getEffectiveWinChance(machine.winChance);
          const isWin = Math.random() < effectiveWinChance;

          if (isWin) {
            const multiplier = machine.minPayout + Math.random() * (machine.maxPayout - machine.minPayout);
            let winAmount = bet * multiplier;
            winAmount = getEffectivePayout(winAmount);
            
            money += winAmount;
            const profit = winAmount - bet;
            totalProfit += profit * (passives.profitMultiplier.owned ? (1 + 0.25 * passives.profitMultiplier.level) : 1);
            
            stats.wins++;
            winStreakCount++;
            if (profit > stats.highestWin) stats.highestWin = profit;
            
            msg.textContent = `üéâ +$${formatMoney(winAmount)}`;
            msg.className = 'machine-message msg-win';
          } else {
            stats.losses++;
            winStreakCount = 0;
            msg.textContent = 'üí´';
            msg.className = 'machine-message msg-lose';
          }

          updateUI();
        }, 200);
      }

      function spinAll() {
        activeMachines.forEach((machine, index) => {
          if (machine !== null) {
            setTimeout(() => spinMachine(index), index * 100);
          }
        });
      }

      function toggleAutoSpinner() {
        if (!passives.autoSpinner.owned) return;
        
        passives.autoSpinner.active = !passives.autoSpinner.active;
        
        if (passives.autoSpinner.active) {
          passives.autoSpinner.interval = setInterval(() => {
            spinAll();
          }, 10000);
        } else {
          if (passives.autoSpinner.interval) {
            clearInterval(passives.autoSpinner.interval);
          }
        }
        
        updateUI();
      }

      function resetGame() {
        if (confirm('Are you sure you want to reset the game? All progress will be lost!')) {
          money = 1000;
          totalProfit = 0;
          activeMachines = Array(8).fill(null);
          inventory = {};
          betValues = {};
          passives = {
            luckyCharm: { owned: false, level: 0, maxLevel: 5 },
            moneyMagnet: { owned: false, level: 0, maxLevel: 5 },
            autoSpinner: { owned: false, active: false, interval: null },
            bulkDiscount: { owned: false, level: 0, maxLevel: 3 },
            profitMultiplier: { owned: false, level: 0, maxLevel: 3 },
            winStreak: { owned: false }
          };
          winStreakCount = 0;
          stats = { spinsPlayed: 0, wins: 0, losses: 0, highestWin: 0 };
          if (passives.autoSpinner.interval) clearInterval(passives.autoSpinner.interval);
          updateUI();
        }
      }

      // Initialize
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('spinAllBtn').onclick = spinAll;
        document.getElementById('resetBtn').onclick = resetGame;
        updateUI();
      });
    </script>
  </body>
</html>
